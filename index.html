<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tet Offensive SIGINT Timeline</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-main: #000000;
      --bg-card: #101010;
      --accent: #e74c3c;
      --accent-soft: #c0392b;
      --text-main: #f5f5f5;
      --text-muted: #a0a0a0;
      --border-subtle: #333333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      color: var(--text-main);
      background: radial-gradient(circle at top, #111 0, #000 60%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .shell {
      max-width: 1000px;
      width: 100%;
      padding: 24px 16px 32px;
    }

    .card {
      background: linear-gradient(135deg, #101010, #161616);
      border-radius: 18px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.85);
      padding: 18px 18px 20px;
    }

    .header-title {
      font-size: 1.5rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      margin: 0 0 4px;
    }

    .header-subtitle {
      font-size: 0.92rem;
      color: var(--text-muted);
      margin-bottom: 14px;
      max-width: 800px;
    }

    /* TIMELINE BAR */
    .timeline-wrapper {
      margin-top: 4px;
      margin-bottom: 16px;
      position: relative;
      padding: 16px 10px 26px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .timeline-label-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .timeline-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .timeline-hint {
      font-size: 0.78rem;
      color: var(--text-muted);
      font-style: italic;
    }

    .timeline-bar {
      position: relative;
      width: 100%;
      height: 3px;
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0.2),
        rgba(255, 255, 255, 0.05)
      );
      border-radius: 999px;
      margin-top: 10px;
      margin-bottom: 26px;
    }

    .timeline-points {
      position: relative;
      width: 100%;
      display: flex;
      justify-content: space-between;
      margin-top: -10px;
    }

    .timeline-point {
      position: relative;
      text-align: center;
      flex: 1;
    }

    .timeline-button {
      position: relative;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid var(--accent);
      background: #000;
      cursor: pointer;
      margin: 0 auto 6px;
      transition: transform 0.12s ease, box-shadow 0.12s ease,
                  background 0.12s ease, border-color 0.12s ease;
    }

    .timeline-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 0 6px rgba(231, 76, 60, 0.18);
      background: #111;
    }

    .timeline-button.active {
      background: var(--accent);
      box-shadow: 0 0 0 6px rgba(231, 76, 60, 0.3);
    }

    .timeline-date-short {
      font-size: 0.78rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 2px;
    }

    .timeline-title-short {
      font-size: 0.8rem;
      color: var(--text-main);
      max-width: 140px;
      margin: 0 auto;
    }

    /* DETAIL SECTION */
    .detail-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
      flex-wrap: wrap;
      gap: 4px;
    }

    .detail-main-title {
      font-size: 1.02rem;
      font-weight: 600;
    }

    .detail-date-full {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .pill-row {
      display: flex;
      justify-content: flex-start;
      gap: 6px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }

    .pill {
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      color: #f4f4f4;
      background: rgba(255, 255, 255, 0.02);
    }

    .pill.type {
      background: linear-gradient(
        135deg,
        rgba(231, 76, 60, 0.28),
        rgba(0, 0, 0, 0.5)
      );
    }

    .pill.source {
      background: rgba(52, 152, 219, 0.18);
    }

    .pill.interp {
      background: rgba(241, 196, 15, 0.18);
    }

    .pill.outcome {
      background: rgba(46, 204, 113, 0.18);
    }

    .detail-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .detail-block {
      padding: 8px 8px 9px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 0.87rem;
      line-height: 1.45;
    }

    .detail-block-title {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .detail-block ul {
      margin: 4px 0 0 16px;
      padding: 0;
    }

    .detail-block li {
      margin: 2px 0;
    }

    .footnote {
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--text-muted);
      font-style: italic;
    }

    @media (max-width: 800px) {
      .detail-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .timeline-title-short {
        max-width: 100px;
      }
    }

    @media (max-width: 520px) {
      .timeline-title-short {
        display: none; /* keep it clean on tiny screens */
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <h1 class="header-title">Tet Offensive: SIGINT vs. Surprise</h1>
      <p class="header-subtitle">
        Click along the timeline to see what American signals intelligence was
        picking up, how analysts interpreted those signals, and how that matched
        (or failed to match) the reality of the Tet Offensive.
      </p>

      <!-- TIMELINE -->
      <div class="timeline-wrapper">
        <div class="timeline-label-row">
          <div class="timeline-label">Timeline of Key Moments</div>
          <div class="timeline-hint">Tap a red node to update the analysis below.</div>
        </div>

        <div class="timeline-bar"></div>
        <div class="timeline-points" id="timelinePoints">
          <!-- Points inserted by JS -->
        </div>
      </div>

      <!-- DETAILS -->
      <div class="detail-header">
        <div class="detail-main-title" id="detailTitle">
          Select an event on the timeline to start exploring the intelligence picture.
        </div>
        <div class="detail-date-full" id="detailDate"></div>
      </div>

      <div class="pill-row">
        <span class="pill type" id="eventTypePill">Event type</span>
        <span class="pill source">SIGINT / Sources</span>
        <span class="pill interp">Interpretation</span>
        <span class="pill outcome">Outcome</span>
      </div>

      <div class="detail-grid">
        <div class="detail-block">
          <div class="detail-block-title">Signals available</div>
          <div id="detailSignals">
            Intercepts, captured documents, and field reports form the raw data of
            intelligence. Use the timeline above to see how those inputs looked at
            different moments around Tet.
          </div>
        </div>
        <div class="detail-block">
          <div class="detail-block-title">How analysts read it</div>
          <div id="detailInterpretation">
            Analysts don’t just receive signals — they filter them through
            assumptions and models. That filtering shaped what Tet “meant” long
            before the first shots on January 30–31, 1968.
          </div>
        </div>
        <div class="detail-block">
          <div class="detail-block-title">What actually happened</div>
          <div id="detailReality">
            Comparing signals and interpretations to what unfolded on the ground
            shows how a system can be rich in data but still experience strategic
            surprise.
          </div>
        </div>
      </div>

      <div class="footnote" id="detailFootnote">
        Tip for your StoryMap narration: treat each step as a mini case study in
        “mutual information failure” — the gap between what was knowable and what
        decision-makers believed.
      </div>
    </div>
  </div>

  <script>
    const events = [
      {
        id: "e1",
        shortDate: "Late 1967",
        fullDate: "Late 1967",
        shortLabel: "‘General Offensive and General Uprising’",
        title: "‘General Offensive and General Uprising’ in documents and COMINT",
        type: "Strategic warning",
        signals: `
          <ul>
            <li>Captured directives and propaganda referenced a coming “General Offensive and General Uprising.”</li>
            <li>COMINT picked up increased messaging about agitation in cities and preparations tied to the Tet holiday.</li>
            <li>Some field reporting noted unusual Viet Cong political activity in urban areas.</li>
          </ul>
        `,
        interpretation: `
          <ul>
            <li>Many U.S. analysts treated the phrase as rhetorical propaganda meant to boost morale, not as literal operational guidance.</li>
            <li>Prevailing assessments held that Communist units were too worn down to mount a large nationwide offensive.</li>
            <li>Analysts who took the language more literally were often categorized as presenting “worst-case” or unlikely scenarios.</li>
          </ul>
        `,
        reality: `
          <ul>
            <li>The phrase in fact described the real operational concept for Tet: coordinated attacks on major urban and political targets.</li>
            <li>The signals were present, but filtered through assumptions that made a broad offensive seem implausible.</li>
            <li>This gap between text and interpretation laid the groundwork for strategic surprise.</li>
          </ul>
        `,
        footnote:
          "Here, COMINT and captured documents contained genuine warning—but belief in enemy weakness kept that warning from fully landing.",
      },
      {
        id: "e2",
        shortDate: "21 Jan 1968",
        fullDate: "21 January 1968",
        shortLabel: "Khe Sanh siege",
        title: "Buildup and siege at Khe Sanh",
        type: "Fixing action",
        signals: `
          <ul>
            <li>SIGINT and reconnaissance showed a major buildup of PAVN forces, artillery, and logistics around Khe Sanh.</li>
            <li>Intercepted messages pointed to preparations for sustained operations against the base.</li>
            <li>Planning documents suggested high-level attention to making Khe Sanh a major engagement.</li>
          </ul>
        `,
        interpretation: `
          <ul>
            <li>MACV and Washington came to see Khe Sanh as the expected centerpiece of any near-term enemy offensive.</li>
            <li>Historical analogies to Dien Bien Phu reinforced the idea of a decisive remote set-piece battle.</li>
            <li>This intense focus made it easier to treat other signals—especially about cities—as secondary or supporting actions.</li>
          </ul>
        `,
        reality: `
          <ul>
            <li>Khe Sanh was important, but it also functioned as a diversion that fixed U.S. attention and forces.</li>
            <li>While U.S. planners watched Khe Sanh, Communist forces were also preparing to strike across South Vietnam, including in Saigon and Hue.</li>
            <li>The intelligence on Khe Sanh was not wrong, but it crowded out a wider sense of the operational design.</li>
          </ul>
        `,
        footnote:
          "This is a classic attention problem: real warning about one location narrowed the aperture on warning for the rest of the theater.",
      },
      {
        id: "e3",
        shortDate: "30 Jan 1968",
        fullDate: "30 January 1968 (Tet Eve)",
        shortLabel: "Early attacks",
        title: "Early Tet attacks in parts of South Vietnam",
        type: "Partial execution",
        signals: `
          <ul>
            <li>Field units and some communications intercepts reported coordinated attacks starting a day earlier than expected in II and III Corps.</li>
            <li>Signals included assaults on district capitals, bases, and government installations.</li>
            <li>Some message traffic hinted at confusion in timing orders between re

